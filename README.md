# GubinNET Web Server

GubinNET — это мощный и гибкий веб-сервер, разработанный для простого развертывания и обслуживания веб-приложений на различных языках программирования. Сервер поддерживает множество современных технологий и предоставляет широкие возможности для настройки.

## Возможности

- **Поддержка HTTP/HTTPS**: Обслуживание запросов по протоколам HTTP и HTTPS.
- **Виртуальные хосты**: Поддержка нескольких доменов с индивидуальными настройками для каждого.
- **Хостинг .NET приложений**: Автоматический запуск и управление жизненным циклом приложений на платформе .NET.
- **Поддержка Node.js**: Встроенная поддержка Node.js приложений.
- **PHP поддержка**: Интеграция с PHP интерпретатором для обработки скриптов.
- **Мониторинг метрик (Prometheus)**: Встроенный эндпоинт для сбора метрик в формате Prometheus.
- **Ограничение скорости (Rate Limiting)**: Защита от злоупотреблений через ограничение количества запросов от одного клиента.
- **Базовая аутентификация**: Защита доступа к ресурсам с использованием Basic Auth.
- **CORS**: Настройка заголовков Cross-Origin Resource Sharing для безопасного взаимодействия между доменами.
- **Сжатие Gzip**: Сжатие ответов для уменьшения объема передаваемых данных.
- **Кэширование**: Кэширование статических файлов для улучшения производительности.
- **Обслуживание статических файлов и SPA**: Поддержка одностраничных приложений (SPA) с fallback механизмом.
- **Ограничение размера запроса**: Защита от перегрузки сервера большими запросами.
- **Пользовательские страницы ошибок**: Информативные страницы ошибок с детальным описанием проблемы.
- **ETag и Last-Modified заголовки**: Поддержка условных запросов для оптимизации кэширования.
- **Проксирование запросов**: Проксирование запросов на другие серверы или внутренние приложения.
- **Автоматическая перезагрузка конфигурации**: Возможность перечитать конфигурацию без перезапуска сервера.
- **Встроенные проверки работоспособности**: Эндпоинт для мониторинга состояния сервера.

---

## Поддерживаемые языки и технологии

- **.NET**: Сервер автоматически запускает и управляет приложениями на платформе .NET. Просто укажите путь к DLL файлу вашего приложения, и сервер сделает все остальное.
- **Node.js**: Встроенная поддержка Node.js позволяет легко развернуть JavaScript приложения на стороне сервера.
- **PHP**: Интеграция с PHP интерпретатором для выполнения скриптов.
- **Статические файлы**: Поддержка обслуживания HTML, CSS, JavaScript, изображений и других статических ресурсов.
- **SPA (Single Page Applications)**: Фолбэк для одностраничных приложений, таких как React, Angular или Vue.js.

---

## Использование

### Запуск сервера

1. Убедитесь, что сервер установлен и настроен.
2. Запустите сервер командой:

   ```bash
   gubinnet start
   ```

3. Доступ к метрикам можно получить по адресу: http://localhost:9090/metrics.
4. Проверка работоспособности доступна по адресу: http://localhost:8081/health.

### Перезагрузка конфигурации

Для перезагрузки конфигурации без остановки сервера отправьте сигнал SIGHUP:

```bash
kill -SIGHUP <PID>
```

### Остановка сервера

Для корректной остановки сервера используйте сигнал SIGTERM или SIGINT:

```bash
kill -SIGTERM <PID>
```

---

## Конфигурация

Конфигурация выполняется через INI файл (по умолчанию: `/etc/gubinnet/config.ini`). Основные параметры включают:

- Порты для прослушивания HTTP/HTTPS.
- Максимальный размер запроса.
- Таймауты для запросов.
- Настройки прокси для upstream серверов.
- Путь к PHP бинарнику и корневой директории для PHP.
- Параметры для .NET и Node.js приложений.

Пример конфигурации:
```ini
[Host:example.com]
BasePath=/var/www/example
WebRootPath=/var/www/example/public
AppMode=dotnet
DllPath=/var/www/example/app.dll
InternalPort=5000
SSLCertificate=/etc/ssl/example.crt
SSLKey=/etc/ssl/example.key

[PHP]
Enabled=true
BinaryPath=/usr/bin/php
WebRootPath=/var/www/php

[NodeJS]
Enabled=true
ScriptPath=/var/www/node/app.js
InternalPort=3000
```

---

## Логирование

Логи сохраняются в формате JSON в указанной директории (по умолчанию: `/etc/gubinnet/logs`). Каждая запись содержит подробную информацию о событиях, включая временные метки, уровень логирования и контекстные данные.

---

## Примечания

- Сервер автоматически управляет жизненным циклом .NET и Node.js приложений.
- Поддерживает обработку больших файлов с использованием потоковой передачи.
- Предотвращает вредоносные URL пути (например, `../`).
- Предоставляет подробное логирование для отладки и мониторинга.
- Поддерживает как сжатые (gzip), так и несжатые ответы в зависимости от предпочтений клиента.
